# 评多多后端README

> 一个面向高校竞赛/活动材料审核场景的智能后端服务系统

## 项目简介

`评多多` 是一个基于 **CloudWeGo Hertz** 构建的高性能 Go 后端服务，专为高校或组织中的**竞赛/活动材料提交与审核流程**设计。系统提供完整的用户生命周期管理（注册、邮箱验证、登录、信息维护），支持学生上传赛事证明材料（如获奖证书、参赛证明），并集成 **AI 智能解析**（基于 GLM-4V 大模型）自动提取赛事关键信息，大幅提升审核效率。

项目采用现代化分层架构，支持 **MySQL + Redis + 七牛云 OSS** 存储，具备配置热重载、JWT 鉴权、结构化日志、错误码统一管理等企业级特性。

## 核心亮点

✅ **AI 智能解析**：上传证书图片，自动识别赛事名称、主办方、时间、奖项等级
✅ **安全邮箱验证**：6位高强度验证码，Redis存储，10分钟有效期，一次性使用
✅ **云原生存储**：本地临时缓存 + 七牛云 OSS 永久存储，支持断点续传
✅ **动态配置**：YAML 配置文件热重载，无需重启服务
✅ **标准化响应**：统一错误码 + 规范化 JSON 响应格式
✅ **高可用设计**：连接池优化、端口自动探测、健康检查
✅ **密码安全**：使用 `bcrypt` 哈希存储，防彩虹表攻击
✅ **强邮箱绑定**：仅限 `@fzu.edu.cn` 邮箱注册（可配置）

## 技术架构

### 1. 核心依赖

| 组件                | 用途                               |
| ------------------- | ---------------------------------- |
| **CloudWeGo Hertz** | 高性能 HTTP 框架                   |
| **GORM**            | MySQL ORM，支持连接池、事务        |
| **Redis**           | 验证码缓存、Token 黑名单（规划中） |
| **七牛云 Go SDK**   | 文件上传至对象存储                 |
| **GLM-4V API**      | 多模态大模型，解析证书图片         |
| **Viper**           | 配置管理，支持 YAML + 热重载       |
| **filetype**        | 安全的文件类型检测                 |

### 2. 目录结构

```t
biz/
├── dal/               # 数据访问（MySQL/Redis）
├── service/           # 业务逻辑（含 AI 调用、OSS 上传）
├── handler/           # HTTP 处理函数（Hertz 生成）
├── pack/              # 响应数据转换
├── router/            # 路由注册
├── mw/                # JWT 中间件
├── model/             # 请求/响应模型
config/                # 配置管理
pkg/
├── utils/             # 工具：SMTP、OSS、AI 调用、DSN 解析
├── errno/             # 统一错误码
├── constants/         # 常量（如表名）
main.go                # 服务入口
```

